function t(t,e,n,i){Object.defineProperty(t,e,{get:n,set:i,enumerable:!0,configurable:!0})}var e=globalThis,n={},i={},s=e.parcelRequire8661;null==s&&((s=function(t){if(t in n)return n[t].exports;if(t in i){var e=i[t];delete i[t];var s={id:t,exports:{}};return n[t]=s,e.call(s.exports,s,s.exports),s.exports}var o=Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(t,e){i[t]=e},e.parcelRequire8661=s);var o=s.register;o("4D3px",function(e,n){t(e.exports,"Config",()=>i);let i=Object.freeze({canvasElementId:"app-canvas",pointsCountInputId:"app-points-count-input",fpsOutputBlockId:"app-fps-output",pointsSizeInput:"app-point-size-input"})}),o("fypJ4",function(e,n){t(e.exports,"PointsAnimation",()=>a);var i=s("4D3px"),o=s("3V8rW");class a{constructor(t,e,n,i,s,a,r){this.physics=t,this.renderer=e,this.renderingtType=n,this.canvasElement=i,this.pointsCountInput=s,this.fpsOutput=a,this.pointsSizeChangeInput=r,this.pointsCount=0,this.canvasSize={width:0,height:0},this.handlePointSizeChange=t=>{this.renderer.setPointSize(Number(t.currentTarget.value))},this.handleInput=()=>{let t=Number(this.pointsCountInput.value);t>1&&(this.pointsCount=t)},this.handleClick=t=>{let e=this.renderingtType===o.CanvasRenderingType.Usual?this.getClickCoordinatesForUsualCanvas(t):this.getClickCoordinatesForWebGLCanvas(t);this.physics.run(e)},this.validateHTML()}startListening(){let t=0,e=0,n=(i=0)=>{window.requestAnimationFrame(n),this.physics.tick(this.pointsCount),this.renderer.render(this.physics.data,this.pointsCount,this.canvasSize),++e,i>t+2e3&&(this.fpsOutput.innerText=(1e3*e/(i-t)).toFixed(2),t=i,e=0)};n()}setupHandlers(){this.canvasElement.width=this.canvasElement.clientWidth,this.canvasElement.height=this.canvasElement.clientHeight,this.canvasSize={width:this.canvasElement.clientWidth,height:this.canvasElement.clientHeight},this.pointsCountInput.addEventListener("input",this.handleInput),this.handleInput(),this.canvasElement.addEventListener("click",this.handleClick),this.pointsSizeChangeInput.addEventListener("input",this.handlePointSizeChange)}getClickCoordinatesForUsualCanvas(t){let e=this.canvasElement.getBoundingClientRect();return{x:t.clientX-e.left,y:t.clientY-e.top}}getClickCoordinatesForWebGLCanvas(t){let e=this.canvasElement.getBoundingClientRect(),n=t.clientX-e.left,i=t.clientY-e.top,s=n-this.canvasElement.clientWidth/2,o=i-this.canvasElement.clientHeight/2;return console.log("Click in pixels from center:",s,o),{x:s,y:o}}validateHTML(){if(!this.canvasElement||!(this.canvasElement instanceof HTMLCanvasElement))throw console.error(`[App]: Canvas element not found. Add <canvas/> with #${i.Config.canvasElementId}`),Error();if(!this.pointsCountInput||!(this.pointsCountInput instanceof HTMLInputElement))throw console.error(`[App]: Input element not found. Add <input/> with #${i.Config.pointsCountInputId}`),Error();if(!this.fpsOutput||!(this.fpsOutput instanceof HTMLElement))throw console.error(`[App]: FPS output element not found. Add element with #${i.Config.pointsCountInputId}`),Error()}}}),o("3V8rW",function(e,n){t(e.exports,"CanvasRenderingType",()=>s);var i,s=((i={}).Usual="Usual",i.WebGL="WebGL",i)}),o("aP3eO",function(e,n){t(e.exports,"JavaScriptPhysics",()=>o);var i=s("mDWTX");class o{static{this.Acceleration=.01}static{this.PI_2=2*Math.PI}constructor(){this.points=new Float32Array(0)}get data(){return this.points}tick(t){this.points=(0,i.resizeF32Array)(this.points,4*t);for(let t=0;t<this.points.length;t+=4)this.points[t+0]+=this.data[t+2],this.points[t+1]+=this.data[t+3],this.points[t+3]+=o.Acceleration}run({x:t,y:e}){for(let n=0;n<this.points.length;n+=4){this.points[n+0]=t,this.points[n+1]=e;let i=29*Math.sqrt(Math.random()),s=Math.random()*o.PI_2;this.points[n+2]=Math.cos(s)*i,this.points[n+3]=Math.sin(s)*i}}}}),o("mDWTX",function(e,n){t(e.exports,"resizeF32Array",()=>i);let i=(t,e)=>{let n=new Float32Array(e);return n.set(t.subarray(0,Math.min(t.length,e))),n}});var a=s("4D3px"),r=s("fypJ4"),h=s("aP3eO");class p{constructor(t){this.canvasRef=t,this.pointSize=3;let e=t.getContext("2d");if(!e)throw console.error("[App]: Can not get context from canvas ",t),Error();this.context=e}render(t,e,n){this.context.fillStyle="white",this.context.strokeStyle="white",this.context.clearRect(0,0,n.width,n.height),this.context.beginPath();for(let n=0;n<4*e;n+=4)this.context.rect(t[n+0]-1,t[n+1]-1,this.pointSize,this.pointSize);this.context.fill(),this.context.stroke()}setPointSize(t){this.pointSize=t}}var l=s("3V8rW");!function(){let t=document.getElementById(a.Config.pointsCountInputId),e=document.getElementById(a.Config.fpsOutputBlockId),n=document.getElementById(a.Config.pointsSizeInput),i=document.getElementById(a.Config.canvasElementId),s=new(0,h.JavaScriptPhysics),o=new p(i),c=new(0,r.PointsAnimation)(s,o,l.CanvasRenderingType.Usual,i,t,e,n);c.setupHandlers(),c.startListening()}();
//# sourceMappingURL=javascript.834ca6e7.js.map
